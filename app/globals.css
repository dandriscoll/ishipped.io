@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

@theme {
  --color-accent: #0969da;
  --color-accent-hover: #0860c7;
  --color-accent-dark: #58a6ff;
  --color-accent-dark-hover: #79b8ff;
  --color-border: #d0d7de;
  --color-border-dark: #30363d;
  --color-muted: #586069;
  --color-muted-dark: #8b949e;
  --color-bg-dark: #0d1117;
  --color-surface-dark: #161b22;
  --color-text-dark: #c9d1d9;

  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
}

/* Custom prose styles for card body */
.card-body {
  @apply prose prose-slate dark:prose-invert max-w-none;
}

.card-body h2 {
  @apply text-xl font-semibold mt-8 mb-4 first:mt-0;
}

.card-body h3 {
  @apply text-lg font-semibold mt-6 mb-3;
}

.card-body p {
  @apply mb-4 leading-relaxed;
}

.card-body ul,
.card-body ol {
  @apply mb-4 pl-6;
}

.card-body li {
  @apply mb-2;
}

.card-body pre {
  @apply bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-lg p-4 overflow-x-auto text-sm mb-4;
}

.card-body code:not(pre code) {
  @apply bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono;
}

.card-body blockquote {
  @apply border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic my-4;
  /* Ensure proper contrast for blockquote text */
  @apply text-gray-700 dark:text-gray-200;
}

/* Theme-specific blockquote styling for better contrast against gradient backgrounds */
[data-card-theme] .card-body blockquote {
  @apply bg-black/5 dark:bg-white/10 rounded-r-lg pr-4 py-2;
}

[data-card-theme="ocean"] .card-body blockquote {
  @apply border-cyan-500 dark:border-cyan-400;
  @apply text-gray-800 dark:text-cyan-50;
}

[data-card-theme="forest"] .card-body blockquote {
  @apply border-green-500 dark:border-green-400;
  @apply text-gray-800 dark:text-green-50;
}

[data-card-theme="sunset"] .card-body blockquote {
  @apply border-orange-500 dark:border-orange-400;
  @apply text-gray-800 dark:text-orange-50;
}

[data-card-theme="lavender"] .card-body blockquote {
  @apply border-purple-500 dark:border-purple-400;
  @apply text-gray-800 dark:text-purple-50;
}

[data-card-theme="midnight"] .card-body blockquote {
  @apply border-indigo-500 dark:border-indigo-400;
  @apply text-gray-800 dark:text-indigo-50;
}

[data-card-theme="ruby"] .card-body blockquote {
  @apply border-red-500 dark:border-red-400;
  @apply text-gray-800 dark:text-red-50;
}

.card-body img {
  @apply rounded-lg max-w-full my-4;
}

.card-body table {
  @apply w-full border-collapse mb-4;
}

.card-body th,
.card-body td {
  @apply border border-gray-300 dark:border-gray-600 px-3 py-2 text-left;
}

.card-body th {
  @apply bg-gray-100 dark:bg-gray-800 font-semibold;
}

.card-body a {
  color: var(--theme-primary-text);
}

.card-body a:hover {
  text-decoration: underline;
}

.card-body hr {
  @apply my-8 border-gray-200 dark:border-gray-700;
}

/* Focus styles */
:focus-visible {
  @apply outline-2 outline-offset-2 outline-accent;
}

/* Dark mode accent colors for proper contrast (WCAG AA requires 4.5:1) */
.dark .text-accent {
  color: var(--color-accent-dark);
}

.dark .text-accent:hover,
.dark .hover\:text-accent-hover:hover {
  color: var(--color-accent-dark-hover);
}

/* Floating card container for desktop */
.floating-card {
  @apply bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-200 dark:border-border-dark;
}

@media (min-width: 768px) {
  .floating-card {
    @apply shadow-xl;
  }
}

/* 3D Card Flip Animation */
.flip-card {
  perspective: 1000px;
}

.flip-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  transform-style: preserve-3d;
}

.flip-card.flipped .flip-card-inner {
  transform: rotateY(180deg);
}

.flip-card-front,
.flip-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.flip-card-back {
  transform: rotateY(180deg);
}

/* Theme presets */
:root {
  --theme-primary: #0969da;
  --theme-primary-hover: #0860c7;
  --theme-primary-text: #0969da;
  --theme-card-bg: #ffffff;
  --theme-card-border: #e5e7eb;
  --theme-page-bg: #f3f4f6;
  --theme-page-accent: transparent;
  --theme-overlay-opacity: 0;
  --theme-orb-1: transparent;
  --theme-orb-2: transparent;
}

.dark {
  --theme-primary-text: #58a6ff;
  --theme-card-bg: #161b22;
  --theme-card-border: #30363d;
  --theme-page-bg: #0d1117;
}

/* ============================================
   OCEAN THEME - Waves and water-inspired
   ============================================ */
[data-card-theme="ocean"] {
  --theme-primary: #0891b2;
  --theme-primary-hover: #0e7490;
  --theme-primary-text: #0e7490;
  --theme-card-bg: linear-gradient(145deg, #ffffff 0%, #ecfeff 50%, #cffafe 100%);
  --theme-card-border: #67e8f9;
  --theme-page-bg: linear-gradient(180deg, #ecfeff 0%, #cffafe 50%, #a5f3fc 100%);
  --theme-overlay-opacity: 0.4;
  --theme-orb-1: rgba(34, 211, 238, 0.3);
  --theme-orb-2: rgba(8, 145, 178, 0.2);
}

.dark [data-card-theme="ocean"],
[data-card-theme="ocean"].dark-theme {
  --theme-primary-text: #67e8f9;
  --theme-card-bg: linear-gradient(145deg, #164e63 0%, #0e4152 50%, #083344 100%);
  --theme-card-border: #0e7490;
  --theme-page-bg: linear-gradient(180deg, #083344 0%, #042f3a 50%, #021a21 100%);
  --theme-orb-1: rgba(34, 211, 238, 0.15);
  --theme-orb-2: rgba(8, 145, 178, 0.1);
}

/* ============================================
   FOREST THEME - Organic and natural
   ============================================ */
[data-card-theme="forest"] {
  --theme-primary: #16a34a;
  --theme-primary-hover: #15803d;
  --theme-primary-text: #15803d;
  --theme-card-bg: linear-gradient(145deg, #ffffff 0%, #f0fdf4 50%, #dcfce7 100%);
  --theme-card-border: #86efac;
  --theme-page-bg: linear-gradient(180deg, #f0fdf4 0%, #dcfce7 50%, #bbf7d0 100%);
  --theme-overlay-opacity: 0.35;
  --theme-orb-1: rgba(74, 222, 128, 0.3);
  --theme-orb-2: rgba(22, 163, 74, 0.2);
}

.dark [data-card-theme="forest"],
[data-card-theme="forest"].dark-theme {
  --theme-primary-text: #86efac;
  --theme-card-bg: linear-gradient(145deg, #166534 0%, #14532d 50%, #052e16 100%);
  --theme-card-border: #15803d;
  --theme-page-bg: linear-gradient(180deg, #052e16 0%, #022c0a 50%, #011a06 100%);
  --theme-orb-1: rgba(74, 222, 128, 0.12);
  --theme-orb-2: rgba(22, 163, 74, 0.08);
}

/* ============================================
   SUNSET THEME - Warm and radiant
   ============================================ */
[data-card-theme="sunset"] {
  --theme-primary: #ea580c;
  --theme-primary-hover: #c2410c;
  --theme-primary-text: #c2410c;
  --theme-card-bg: linear-gradient(145deg, #ffffff 0%, #fff7ed 50%, #ffedd5 100%);
  --theme-card-border: #fdba74;
  --theme-page-bg: linear-gradient(180deg, #fef3c7 0%, #fed7aa 50%, #fdba74 100%);
  --theme-overlay-opacity: 0.3;
  --theme-orb-1: rgba(251, 146, 60, 0.35);
  --theme-orb-2: rgba(234, 88, 12, 0.2);
}

.dark [data-card-theme="sunset"],
[data-card-theme="sunset"].dark-theme {
  --theme-primary-text: #fdba74;
  --theme-card-bg: linear-gradient(145deg, #9a3412 0%, #7c2d12 50%, #431407 100%);
  --theme-card-border: #c2410c;
  --theme-page-bg: linear-gradient(180deg, #431407 0%, #2a0d05 50%, #1a0803 100%);
  --theme-orb-1: rgba(251, 146, 60, 0.15);
  --theme-orb-2: rgba(234, 88, 12, 0.1);
}

/* ============================================
   LAVENDER THEME - Soft and elegant
   ============================================ */
[data-card-theme="lavender"] {
  --theme-primary: #9333ea;
  --theme-primary-hover: #7e22ce;
  --theme-primary-text: #7e22ce;
  --theme-card-bg: linear-gradient(145deg, #ffffff 0%, #faf5ff 50%, #f3e8ff 100%);
  --theme-card-border: #d8b4fe;
  --theme-page-bg: linear-gradient(180deg, #faf5ff 0%, #f3e8ff 50%, #e9d5ff 100%);
  --theme-overlay-opacity: 0.35;
  --theme-orb-1: rgba(192, 132, 252, 0.35);
  --theme-orb-2: rgba(147, 51, 234, 0.2);
}

.dark [data-card-theme="lavender"],
[data-card-theme="lavender"].dark-theme {
  --theme-primary-text: #d8b4fe;
  --theme-card-bg: linear-gradient(145deg, #6b21a8 0%, #581c87 50%, #3b0764 100%);
  --theme-card-border: #7e22ce;
  --theme-page-bg: linear-gradient(180deg, #3b0764 0%, #2e0550 50%, #1a022e 100%);
  --theme-orb-1: rgba(192, 132, 252, 0.12);
  --theme-orb-2: rgba(147, 51, 234, 0.08);
}

/* ============================================
   MIDNIGHT THEME - Cosmic and dreamy
   ============================================ */
[data-card-theme="midnight"] {
  --theme-primary: #6366f1;
  --theme-primary-hover: #4f46e5;
  --theme-primary-text: #4f46e5;
  --theme-card-bg: linear-gradient(145deg, #ffffff 0%, #eef2ff 50%, #e0e7ff 100%);
  --theme-card-border: #a5b4fc;
  --theme-page-bg: linear-gradient(180deg, #eef2ff 0%, #e0e7ff 50%, #c7d2fe 100%);
  --theme-overlay-opacity: 0.4;
  --theme-orb-1: rgba(129, 140, 248, 0.35);
  --theme-orb-2: rgba(99, 102, 241, 0.2);
}

.dark [data-card-theme="midnight"],
[data-card-theme="midnight"].dark-theme {
  --theme-primary-text: #a5b4fc;
  --theme-card-bg: linear-gradient(145deg, #3730a3 0%, #312e81 50%, #1e1b4b 100%);
  --theme-card-border: #4f46e5;
  --theme-page-bg: linear-gradient(180deg, #1e1b4b 0%, #0f0e29 50%, #030014 100%);
  --theme-orb-1: rgba(129, 140, 248, 0.15);
  --theme-orb-2: rgba(99, 102, 241, 0.1);
}

/* ============================================
   RUBY THEME - Bold and passionate
   ============================================ */
[data-card-theme="ruby"] {
  --theme-primary: #dc2626;
  --theme-primary-hover: #b91c1c;
  --theme-primary-text: #b91c1c;
  --theme-card-bg: linear-gradient(145deg, #ffffff 0%, #fef2f2 50%, #fee2e2 100%);
  --theme-card-border: #fca5a5;
  --theme-page-bg: linear-gradient(180deg, #fef2f2 0%, #fee2e2 50%, #fecaca 100%);
  --theme-overlay-opacity: 0.35;
  --theme-orb-1: rgba(248, 113, 113, 0.35);
  --theme-orb-2: rgba(220, 38, 38, 0.2);
}

.dark [data-card-theme="ruby"],
[data-card-theme="ruby"].dark-theme {
  --theme-primary-text: #fca5a5;
  --theme-card-bg: linear-gradient(145deg, #991b1b 0%, #7f1d1d 50%, #450a0a 100%);
  --theme-card-border: #b91c1c;
  --theme-page-bg: linear-gradient(180deg, #450a0a 0%, #2a0606 50%, #1a0303 100%);
  --theme-orb-1: rgba(248, 113, 113, 0.15);
  --theme-orb-2: rgba(220, 38, 38, 0.1);
}

/* ============================================
   THEMED PAGE BACKGROUND
   ============================================ */
.themed-page-bg {
  background: var(--theme-page-bg);
  position: relative;
  overflow: hidden;
}

/* Decorative orbs for themed backgrounds */
.themed-page-bg::before,
.themed-page-bg::after {
  content: "";
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  filter: blur(80px);
}

.themed-page-bg::before {
  width: 600px;
  height: 600px;
  background: var(--theme-orb-1);
  top: -200px;
  right: -150px;
}

.themed-page-bg::after {
  width: 500px;
  height: 500px;
  background: var(--theme-orb-2);
  bottom: -150px;
  left: -100px;
}

/* ============================================
   THEMED CARD STYLES
   ============================================ */
.themed-card {
  background: var(--theme-card-bg);
  border-color: var(--theme-card-border);
  position: relative;
  overflow: hidden;
}

.themed-card .text-accent,
.themed-card a:not(.btn):not([class*="bg-"]) {
  color: var(--theme-primary-text);
}

.themed-card [class*="hover\:text-accent"]:hover {
  color: var(--theme-primary-text);
}

.themed-card .bg-accent {
  background-color: var(--theme-primary);
  color: white;
}

.themed-card .bg-accent:hover,
.themed-card [class*="hover\:bg-accent"]:hover {
  background-color: var(--theme-primary-hover);
  color: white;
}

/* Card content sits above overlays */
.themed-card > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   THEME-SPECIFIC CARD OVERLAYS
   ============================================ */

/* Ocean theme - Wave pattern */
[data-card-theme="ocean"] .theme-overlay {
  position: absolute;
  inset: 0;
  opacity: var(--theme-overlay-opacity);
  pointer-events: none;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%2306b6d4' fill-opacity='0.4' d='M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,218.7C672,235,768,245,864,234.7C960,224,1056,192,1152,181.3C1248,171,1344,181,1392,186.7L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: bottom center;
  background-size: 200% auto;
}

[data-card-theme="ocean"] .theme-overlay::before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(34, 211, 238, 0.2) 0%, transparent 70%);
  border-radius: 50%;
  transform: translate(30%, -30%);
}

/* Forest theme - Leaf/organic pattern */
[data-card-theme="forest"] .theme-overlay {
  position: absolute;
  inset: 0;
  opacity: var(--theme-overlay-opacity);
  pointer-events: none;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='%2322c55e' fill-opacity='0.3'%3E%3Cpath d='M20 35c5-8 15-10 20-5s5 15-5 20-20 1-20-5 0-2 5-10z'/%3E%3Cpath d='M60 55c-5 8-15 10-20 5s-5-15 5-20 20-1 20 5 0 2-5 10z'/%3E%3C/g%3E%3C/svg%3E");
  background-size: 120px 120px;
  background-position: top right;
}

[data-card-theme="forest"] .theme-overlay::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 250px;
  height: 250px;
  background: radial-gradient(ellipse at bottom left, rgba(74, 222, 128, 0.25) 0%, transparent 60%);
}

[data-card-theme="forest"] .theme-overlay::after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(22, 163, 74, 0.15) 0%, transparent 70%);
  transform: translate(20%, -20%);
}

/* Sunset theme - Warm rays */
[data-card-theme="sunset"] .theme-overlay {
  position: absolute;
  inset: 0;
  opacity: var(--theme-overlay-opacity);
  pointer-events: none;
  background:
    radial-gradient(ellipse at top right, rgba(251, 146, 60, 0.4) 0%, transparent 50%),
    radial-gradient(ellipse at bottom left, rgba(234, 88, 12, 0.2) 0%, transparent 40%);
}

[data-card-theme="sunset"] .theme-overlay::before {
  content: "";
  position: absolute;
  top: -50px;
  right: -50px;
  width: 300px;
  height: 300px;
  background: conic-gradient(from 180deg, transparent 0deg, rgba(251, 191, 36, 0.15) 30deg, transparent 60deg, rgba(251, 146, 60, 0.1) 90deg, transparent 120deg);
  border-radius: 50%;
}

/* Lavender theme - Soft geometric */
[data-card-theme="lavender"] .theme-overlay {
  position: absolute;
  inset: 0;
  opacity: var(--theme-overlay-opacity);
  pointer-events: none;
  background-image:
    radial-gradient(circle at 20% 80%, rgba(192, 132, 252, 0.3) 0%, transparent 30%),
    radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.2) 0%, transparent 25%);
}

[data-card-theme="lavender"] .theme-overlay::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Ccircle cx='30' cy='30' r='4' fill='%239333ea' fill-opacity='0.08'/%3E%3Ccircle cx='10' cy='10' r='2' fill='%239333ea' fill-opacity='0.06'/%3E%3Ccircle cx='50' cy='50' r='2' fill='%239333ea' fill-opacity='0.06'/%3E%3C/svg%3E");
  background-size: 60px 60px;
}

/* Midnight theme - Stars/constellation */
[data-card-theme="midnight"] .theme-overlay {
  position: absolute;
  inset: 0;
  opacity: var(--theme-overlay-opacity);
  pointer-events: none;
  background:
    radial-gradient(ellipse at 30% 20%, rgba(129, 140, 248, 0.3) 0%, transparent 40%),
    radial-gradient(ellipse at 70% 80%, rgba(99, 102, 241, 0.2) 0%, transparent 35%);
}

[data-card-theme="midnight"] .theme-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(2px 2px at 20px 30px, rgba(199, 210, 254, 0.8), transparent),
    radial-gradient(2px 2px at 60px 70px, rgba(165, 180, 252, 0.6), transparent),
    radial-gradient(1px 1px at 90px 20px, rgba(199, 210, 254, 0.5), transparent),
    radial-gradient(2px 2px at 130px 80px, rgba(129, 140, 248, 0.7), transparent),
    radial-gradient(1px 1px at 160px 40px, rgba(165, 180, 252, 0.4), transparent),
    radial-gradient(2px 2px at 200px 90px, rgba(199, 210, 254, 0.6), transparent),
    radial-gradient(1px 1px at 40px 100px, rgba(129, 140, 248, 0.5), transparent),
    radial-gradient(2px 2px at 110px 120px, rgba(165, 180, 252, 0.7), transparent);
  background-size: 220px 150px;
}

/* Ruby theme - Gem facets */
[data-card-theme="ruby"] .theme-overlay {
  position: absolute;
  inset: 0;
  opacity: var(--theme-overlay-opacity);
  pointer-events: none;
  background:
    radial-gradient(ellipse at top right, rgba(248, 113, 113, 0.4) 0%, transparent 45%),
    radial-gradient(ellipse at bottom left, rgba(220, 38, 38, 0.25) 0%, transparent 40%);
}

[data-card-theme="ruby"] .theme-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cpolygon points='30,5 55,30 30,55 5,30' fill='none' stroke='%23dc2626' stroke-opacity='0.08' stroke-width='1'/%3E%3Cpolygon points='30,15 45,30 30,45 15,30' fill='%23dc2626' fill-opacity='0.04'/%3E%3C/svg%3E");
  background-size: 80px 80px;
}

[data-card-theme="ruby"] .theme-overlay::after {
  content: "";
  position: absolute;
  top: -30px;
  right: -30px;
  width: 250px;
  height: 250px;
  background: radial-gradient(circle, rgba(252, 165, 165, 0.3) 0%, transparent 60%);
  border-radius: 50%;
}

/* Dark mode adjustments for overlays */
.dark [data-card-theme="ocean"] .theme-overlay,
.dark [data-card-theme="forest"] .theme-overlay,
.dark [data-card-theme="sunset"] .theme-overlay,
.dark [data-card-theme="lavender"] .theme-overlay,
.dark [data-card-theme="midnight"] .theme-overlay,
.dark [data-card-theme="ruby"] .theme-overlay {
  opacity: calc(var(--theme-overlay-opacity) * 0.7);
}
